@using DanzFloor.Web.Models.ViewModels.Backend.Home

@model GraficoBarraViewModel
<div class="col-md-6">
    <div class="card z-depth-4">
        <div class="card-header">
            <h2>Evolutivo tickets</h2>

            <ul class="actions">
                <li>
                    <a href="/Ticket">
                        <i class="zmdi zmdi-eye"></i>
                    </a>
                </li>
                <li>
                    <a href="">
                        <i class="zmdi zmdi-download"></i>
                    </a>
                </li>
            </ul>
        </div>

        <div class="card-body card-padding-sm">
            <div id="container" style="min-width: 310px; height: 400px; margin: 0 auto"></div>
        </div>
    </div>
</div>

    <script type="text/javascript">
    var grafico = @Html.Raw(Json.Encode(Model));
    // Create the chart
    Highcharts.chart('container', {
        chart: {
            type: 'column'
        },
        title: {
            text: null
        },
        subtitle: {
            text: null
        },
        xAxis: {
            type: 'category'
        },
        yAxis: {
            title: {
                text: 'Cantidad de reclamos'
            }

        },
        legend: {
            enabled: false
        },
        plotOptions: {
            series: {
                borderWidth: 0,
                dataLabels: {
                    enabled: true
                }
            }
        },

        tooltip: {
            headerFormat: '<span style="font-size:11px">{series.name}</span><br>',
            pointFormat: '<span style="color:{point.color}">{point.name}</span>: <b>{point.y}</b> Tickets<br/>'
        },
        series: grafico.series,
        drilldown: {
            series: [
            @foreach (var item in Model.drilldown.series)
                {
                @Html.Raw("{name:'" + item.name + "',")
                @Html.Raw("id:'" + item.id + "',")
                @Html.Raw("data:[")
                foreach (var subitem in item.data)
                {
                    @Html.Raw("['" + subitem.nombre + "', " + subitem.valor + "],")
                }
                @Html.Raw("]},")
                }
            ]
        }
    });
    </script>
